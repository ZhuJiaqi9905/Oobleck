#!/bin/bash

world_size=15
if [ "$world_size" -eq 8 ]; then
    nodes="10.244.0.81 10.244.0.82 10.244.1.99 10.244.1.100 10.244.2.178 10.244.2.179 10.244.5.80 10.244.5.81"
elif [ "$world_size" -eq 9 ]; then
    nodes="10.244.0.81 10.244.0.82 10.244.1.99 10.244.1.100 10.244.2.178 10.244.2.179 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ "$world_size" -eq 10 ]; then
    nodes="10.244.0.81 10.244.0.82 10.244.1.99 10.244.1.100 10.244.2.178 10.244.2.179 10.244.2.180 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ ${world_size} -eq 11 ]; then
    nodes="10.244.0.81 10.244.0.82 10.244.1.99 10.244.1.100 10.244.1.101 10.244.2.178 10.244.2.179 10.244.2.180 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ ${world_size} -eq 12 ]; then
    nodes="10.244.0.81 10.244.0.82 10.244.0.83 10.244.1.99 10.244.1.100 10.244.1.101 10.244.2.178 10.244.2.179 10.244.2.180 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ "$world_size" -eq 13 ]; then 
    nodes="10.244.0.81 10.244.0.82  10.244.0.83 10.244.0.84 10.244.1.99 10.244.1.100 10.244.1.101 10.244.2.178 10.244.2.179 10.244.2.180 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ ${world_size} -eq 14 ]; then
    nodes="10.244.0.81 10.244.0.82  10.244.0.83 10.244.0.84 10.244.1.99 10.244.1.100 10.244.1.101 10.244.1.102 10.244.2.178 10.244.2.179 10.244.2.180 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ ${world_size} -eq 15 ]; then
    nodes="10.244.0.81 10.244.0.82  10.244.0.83 10.244.0.84 10.244.1.99 10.244.1.100 10.244.1.101 10.244.1.102 10.244.2.178 10.244.2.179 10.244.2.180 10.244.2.181 10.244.5.80 10.244.5.81 10.244.5.82"
elif [ ${world_size} -eq 16 ]; then
    nodes="10.244.0.81 10.244.0.82  10.244.0.83 10.244.0.84 10.244.1.99 10.244.1.100 10.244.1.101 10.244.1.102 10.244.2.178 10.244.2.179 10.244.2.180 10.244.2.181 10.244.5.80 10.244.5.81 10.244.5.82 10.244.5.83"
fi

python -m oobleck.run \
--config_path ./examples/bert_340M.yaml \
--node_ips ${nodes} \
--node_port 2222 \
--master_ip 10.244.0.81 \
--master_port 60000

